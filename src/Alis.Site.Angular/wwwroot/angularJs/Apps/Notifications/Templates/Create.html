<ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="#/home?appID={{::vm.appID}}&eventID={{::vm.eventID}}">Notifications</a></li>
    <li class="active">Create</li>
</ol>

<div class="page-header">
    <h2>{{vm.application.Name}} <small>{ {{vm.Event.FriendlyName}} }</small>
    </h2>
    <small ng-bind-html="vm.details | sanitize"></small>
</div>

<notifications></notifications>


<div class="row">
    <div class="col-md-9">
        <form name="createNotificationForm" class="form-horizontal">

            <div class="form-group" show-errors>
                <label for="from" class="col-sm-2 control-label">From</label>
                <div class="col-sm-7">
                    <input type="text" class="form-control" id="from" name="From" ng-disabled="vm.overrideFrom != true" placeholder="From" ng-required ng-model="vm.Notification.From"/>

                    <span class="help-block" ng-show="createNotificationForm.From.$invalid">{{createNotificationForm.From.$errorText}}</span>
                </div>
                <div class="col-sm-3">
                    <div class="btn-group" data-toggle="buttons">
                        <label class="btn btn-default" ng-class="{active: vm.overrideFrom == 'Override'}">
                            <input type="checkbox" ng-model="vm.overrideFrom"> Override
                        </label>
                    </div>
                </div>
            </div>
            <div class="form-group" show-errors>
                <label for="to" class="col-sm-2 control-label">To</label>
                <div class="col-sm-7">
                    <input type="text" class="form-control" id="to" name="to" placeholder="To" ng-required ng-model="vm.Notification.Recipients" ng-disabled="vm.selectedTarget != 'Custom'"/>
                    <span class="help-block" ng-show="createNotificationForm.Recipients.$invalid">{{createNotificationForm.Recipients.$errorText}}</span>
                </div>
                <div class="col-sm-3">
                    <div class="btn-group">
                        <select class="form-control" ng-options="target as target for target in vm.Event.Targets" ng-model="vm.selectedTarget" >
                        </select>

                    </div>
                </div>
            </div>
            <div class="form-group" show-errors>
                <label for="subject" class="col-sm-2 control-label">Subject</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="subject" name="Subject" placeholder="Notifiction Subject" ng-required ng-model="vm.Notification.Subject"/>
                    <span class="help-block" ng-show="createNotificationForm.Subject.$invalid">{{createNotificationForm.Subject.$errorText}}</span>
                </div>
            </div>
            <div class="form-group" show-errors>
                <label for="message" class="col-sm-2 control-label">Message</label>
                <div class="col-sm-10">
                    <textarea class="form-control" id="message" name="Message" placeholder="Message" ng-required ng-model="vm.Notification.Message"></textarea>
                    <span class="help-block" ng-show="createNotificationForm.Message.$invalid">{{createNotificationForm.Message.$errorText}}</span>
                </div>
            </div>

            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button class="btn btn-default" ng-click="vm.Create()">Create</button> <a href="#/home?appID={{::vm.appID}}&eventID={{::vm.eventID}}" class="btn btn-default">Back</a>
                </div>
            </div>


        </form>
    </div>
    <div class="col-md-3">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Tags</h3>
            </div>
            <div class="panel-body">
                <p ng-repeat="tag in vm.Event.Tags" popover data-trigger="hover" placement="top" data-original-title="Details" data-content="{{tag.Description}}" ng-click="vm.AppendTag(tag)">{{tag.Name}}</p><br/>
            </div>
        </div>
    </div>
</div>