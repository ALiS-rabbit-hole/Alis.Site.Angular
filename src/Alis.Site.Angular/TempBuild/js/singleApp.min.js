var config={angularRoot:"http://localhost:24095/AngularJs",serviceRoot:"http://localhost:18636"},config={angularRoot:"https://alis.online/AngularJs",serviceRoot:"https://alis.ws"};angular.module("templatescache",[]).run(["$templateCache",function(e){e.put("angularJs/Templates/_addressForm.html",'<div class="form-group" show-errors><label for="Name" class="col-sm-2 control-label">Friendly Name</label><div class="col-sm-10"><input type="text" class="form-control" name="Name" id="Name" placeholder="Name" ng-required ng-model="$parent.Address.Name"> <span class="help-block" ng-show="Address.Name.$invalid">{{Address.Name.$errorText}}</span></div></div><div class="form-group" show-errors><label for="name" class="col-sm-2 control-label">Address 1</label><div class="col-sm-10"><input type="text" class="form-control" name="Address1" id="Address1" placeholder="Address 1" ng-required ng-model="$parent.Address.Address1"> <span class="help-block" ng-show="Address.Address1.$invalid">{{Address.Address1.$errorText}}</span></div></div><div class="form-group" show-errors><label for="Address2" class="col-sm-2 control-label">Address 2</label><div class="col-sm-10"><input type="text" class="form-control" name="Address2" id="Address2" placeholder="Address 2" ng-required ng-model="$parent.Address.Address2"> <span class="help-block" ng-show="Address.Address2.$invalid">{{Address.Address2.$errorText}}</span></div></div><div class="form-group" show-errors><label for="Town" class="col-sm-2 control-label">Town</label><div class="col-sm-10"><input type="text" class="form-control" name="Town" id="Town" placeholder="Town" ng-required ng-model="$parent.Address.Town"> <span class="help-block" ng-show="Address.Town.$invalid">{{Address.Town.$errorText}}</span></div></div><div class="form-group" show-errors><label for="Address2" class="col-sm-2 control-label">County</label><div class="col-sm-10"><input type="text" class="form-control" name="County" id="County" placeholder="County" ng-required ng-model="$parent.Address.County"> <span class="help-block" ng-show="Address.County.$invalid">{{Address.County.$errorText}}</span></div></div><div class="form-group" show-errors><label for="Address2" class="col-sm-2 control-label">Postcode</label><div class="col-sm-10"><input type="text" class="form-control" name="Postcode" id="Postcode" placeholder="Postcode" ng-required ng-model="$parent.Address.Postcode"> <span class="help-block" ng-show="Address.Postcode.$invalid">{{Address.Postcode.$errorText}}</span></div></div>'),e.put("angularJs/Templates/_institutionForm.html",'<ul class="nav nav-tabs"><li role="presentation" class="active"><a data-target="#details" data-toggle="tab">Details</a></li><li role="presentation"><a data-target="#configuration" data-toggle="tab">Configuration</a></li></ul><form name="institutionForm" class="form-horizontal"><div class="tab-content"><div class="tab-pane active" id="details"><h4>Details</h4><div class="form-group" show-errors><label for="name" class="col-sm-2 control-label">Edit Institution</label><div class="col-sm-10"><input type="text" class="form-control" id="name" name="Name" placeholder="Institution Name" ng-required ng-model="vm.institutionConfig.Institution.Name"> <span class="help-block" ng-show="institutionForm.Name.$invalid">{{institutionForm.Name.$errorText}}</span></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button class="btn btn-default" ng-click="vm.Save()">Save</button> <a href="#/Home" class="btn btn-warning">Cancel</a></div></div></div><div class="tab-pane" id="configuration"><h4>Configuration</h4><div class="form-group" show-errors><label for="UploadName" class="col-sm-2 control-label">Name</label><div class="col-sm-10"><input type="text" class="form-control" id="UploadName" name="UploadName" placeholder="Upload Location Name" ng-required ng-model="vm.institutionConfig.UploadLocation.Name"> <span class="help-block" ng-show="institutionForm.UploadName.$invalid">{{institutionForm.UploadName.$errorText}}</span></div></div><div class="form-group" show-errors><label for="UploadLocation" class="col-sm-2 control-label">Upload Location</label><div class="col-sm-10"><input type="text" class="form-control" id="UploadLocation" name="UploadLocation" placeholder="Upload Location" ng-required ng-model="vm.institutionConfig.UploadLocation.Location"> <span class="help-block" ng-show="institutionForm.UploadLocation.$invalid">{{institutionForm.UploadLocation.$errorText}}</span></div></div></div></div></form>'),e.put("angularJs/Templates/_notificationForm.html",'<notifications></notifications><div class="row"><div class="col-md-9"><form name="notificationForm" class="form-horizontal"><div class="form-group" show-errors><label for="from" class="col-sm-2 control-label">From</label><div class="col-sm-7"><input type="text" class="form-control" id="from" name="From" ng-disabled="vm.overrideFrom != \'Override\'" placeholder="From" ng-required ng-model="vm.Notification.From"> <span class="help-block" ng-show="notificationForm.From.$invalid">{{notificationForm.From.$errorText}}</span></div><div class="col-sm-3"><button type="button" class="btn btn-default" ng-model="vm.overrideFrom" uib-btn-checkbox btn-checkbox-true="\'Override\'" btn-checkbox-false="\'nope\'">Override</button></div></div><div class="form-group" show-errors><label for="to" class="col-sm-2 control-label">To</label><div class="col-sm-7"><input type="text" class="form-control" id="to" name="to" placeholder="To" ng-required ng-model="vm.Notification.Recipients" ng-disabled="vm.selectedTarget != \'Custom\'"> <span class="help-block" ng-show="notificationForm.Recipients.$invalid">{{notificationForm.Recipients.$errorText}}</span></div><div class="col-sm-3"><div class="btn-group"><select class="form-control" ng-options="target as target for target in vm.Event.Targets" ng-model="vm.selectedTarget"></select></div></div></div><div class="form-group" show-errors><label for="subject" class="col-sm-2 control-label">Subject</label><div class="col-sm-10"><input type="text" class="form-control" id="subject" name="Subject" placeholder="Notifiction Subject" ng-required ng-model="vm.Notification.Subject"> <span class="help-block" ng-show="notificationForm.Subject.$invalid">{{notificationForm.Subject.$errorText}}</span></div></div><div class="form-group" show-errors><label for="message" class="col-sm-2 control-label">Message</label><div class="col-sm-10"><textarea class="form-control" id="message" name="Message" placeholder="Message" ng-required ng-model="vm.Notification.Message"></textarea><span class="help-block" ng-show="notificationForm.Message.$invalid">{{notificationForm.Message.$errorText}}</span></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button class="btn btn-default" ng-click="vm.Create()">Create</button> <a href="#/home?appID={{::vm.appID}}&eventID={{::vm.eventID}}" class="btn btn-default">Back</a></div></div></form></div><div class="col-md-3"><div class="panel panel-default"><div class="panel-heading"><h3 class="panel-title">Tags</h3></div><div class="panel-body"><p ng-repeat="tag in vm.Event.Tags" popover-trigger="focus" popover-placement="top" popover-title="Details" uib-popover="{{tag.Description}}" ng-click="vm.AppendTag(tag)">{{tag.Name}}</p><br></div></div></div></div>'),e.put("angularJs/Templates/_notifications.html",'<div class="alert alert-success fade in" ng-show="notifications.success.valid" role="alert"><a class="close" data-dismiss="alert">&times;</a> <strong>Success</strong><ul><li ng-repeat="description in notifications.success.descriptions">{{description}}</li></ul></div><div class="alert alert-danger fade in" ng-show="notifications.errors.invalid" role="alert"><a class="close" data-dismiss="alert">&times;</a> <strong>Error!</strong><ul><li ng-repeat="description in notifications.errors.descriptions">{{description}}</li></ul></div>'),e.put("angularJs/Templates/_paging.html",'<nav><ul class="pagination"><li><a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li><li><a href="#">1</a></li><li><a href="#">2</a></li><li><a href="#">3</a></li><li><a href="#">4</a></li><li><a href="#">5</a></li><li><a href="#" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li></ul>{{::queryItem.TotalNumberOfResults}}</nav>'),e.put("angularJs/Templates/_roleForm.html",'<notifications></notifications><form name="editRoleForm" class="form-horizontal"><div class="form-group" show-errors><label for="name" class="col-sm-2 control-label">Edit Role</label><div class="col-sm-10"><input type="text" class="form-control" id="name" name="Name" placeholder="Role Name" ng-required ng-model="vm.role.Name"> <span class="help-block" ng-show="editRoleForm.Name.$invalid">{{editRoleForm.Name.$errorText}}</span></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button class="btn btn-default" ng-click="vm.Save()">Save</button> <a href="#/Home" class="btn btn-warning">Cancel</a></div></div></form>'),e.put("angularJs/Templates/_userForm.html",'<notifications></notifications><form name="userForm" class="form-horizontal"><fieldset><uib-tabset active="activeForm"><uib-tab index="0" heading="Details"><h4>Details</h4><div class="form-group" show-errors><label for="username" class="col-sm-2 control-label">Username</label><div class="col-sm-10"><input type="text" class="form-control" id="username" name="Username" placeholder="Username" ng-required ng-model="vm.user.Username"> <span class="help-block" ng-show="userForm.Username.$invalid">{{userForm.Username.$errorText}}</span></div></div><div class="form-group" show-errors><label for="forename" class="col-sm-2 control-label">Forename</label><div class="col-sm-10"><input type="text" class="form-control" id="forename" name="Forename" placeholder="Forename" ng-required ng-model="vm.user.Forename"> <span class="help-block" ng-show="userForm.Forename.$invalid">{{userForm.Forename.$errorText}}</span></div></div><div class="form-group" show-errors><label for="surname" class="col-sm-2 control-label">Surname</label><div class="col-sm-10"><input type="text" class="form-control" id="surname" name="Surname" placeholder="Surname" ng-required ng-model="vm.user.Surname"> <span class="help-block" ng-show="userForm.Surname.$invalid">{{userForm.Surname.$errorText}}</span></div></div><div class="form-group" show-errors><label for="email" class="col-sm-2 control-label">Email</label><div class="col-sm-10"><input type="text" class="form-control" id="email" name="Email" placeholder="Email" ng-required ng-model="vm.user.Email"> <span class="help-block" ng-show="userForm.Email.$invalid">{{userForm.Email.$errorText}}</span></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><div class="checkbox"><label><input type="checkbox" ng-model="vm.user.Enabled"> Enabled</label></div></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button class="btn btn-default" ng-click="vm.Save()">Save</button> <a class="btn btn-warning" ui-sref="{{backg}}">Cancel</a></div></div></uib-tab><uib-tab index="1" heading="Access"><h4>Access</h4><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><div class="panel panel-default"><div class="panel-heading">Roles</div><div class="panel-body"><label class="checkbox-inline" ng-repeat="role in ::vm.roles track by role.ID"><input type="checkbox" data-checklist-model="vm.user.Roles" data-checklist-value="role"> {{::role.Name}}</label></div></div></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><div class="panel panel-default"><div class="panel-heading clearfix">Institutions<div class="btn-group pull-right" uib-dropdown is-open="status.isopen"><button id="single-button" type="button" class="btn btn-default dropdown-toggle" uib-dropdown-toggle ng-disabled="disabled">Add to Institution <span class="caret"></span></button><ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button"><li ng-repeat="institution in vm.institutions | notInArray:vm.user.Institutions:\'ID\'"><a ng-click="vm.addToInstitution(institution)">{{institution.Name}}</a></li></ul></div></div><div class="panel-body"><div class="well well-sm" ng-repeat="institution in vm.user.Institutions"><h4>{{institution.Name}}</h4><button ng-click="vm.removeInstitution(institution)" class="btn btn-danger btn-sm pull-right">Remove</button><div><label class="checkbox-inline" ng-repeat="role in ::vm.roles track by role.ID"><input type="checkbox" data-checklist-model="institution.Roles" data-checklist-value="role"> {{::role.Name}}</label></div></div></div></div></div></div></uib-tab></uib-tabset></fieldset></form>'),e.put("angularJs/Apps/Account/Templates/Login.html",'<div class="container"><div class="row"><div class="col-md-4 center-block"><form class="form-signin"><h2 class="form-signin-heading">Please sign in</h2><label for="inputEmail" class="sr-only">Email address</label><input type="email" id="inputEmail" class="form-control" placeholder="Email address" required autofocus><label for="inputPassword" class="sr-only">Password</label><input type="password" id="inputPassword" class="form-control" placeholder="Password" required><div class="checkbox"><label><input type="checkbox" value="remember-me"> Remember me</label></div><button class="btn btn-lg btn-primary btn-block" type="submit">Sign in</button></form></div></div></div>'),e.put("angularJs/Apps/Account/Templates/View.html",'<ol class="breadcrumb"><li><a href="/">Home</a></li><li><a href="/#">Applications</a></li><li class="active">View {{::vm.application.Name}}</li></ol><h1>{{::vm.application.Name}}</h1><table class="table"><thead><tr></tr></thead><tr ng-repeat="event in vm.application.Events track by event.ID"><td>{{::event.Name}}</td><td><ul ng-repeat="tag in event.Tags track by tag.ID">{{::tag.Name}}</ul></td></tr></table><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><a href="#/Home" class="btn btn-default">Back</a></div></div>'),e.put("angularJs/Apps/Applications/Templates/View.html",'<ol class="breadcrumb"><li><a href="/">Home</a></li><li><a href="/#">Applications</a></li><li class="active">View {{::vm.application.Name}}</li></ol><h1>{{::vm.application.Name}}</h1><table class="table"><thead><tr></tr></thead><tr ng-repeat="event in vm.application.Events track by event.ID"><td>{{::event.Name}}</td><td><ul ng-repeat="tag in event.Tags track by tag.ID">{{::tag.Name}}</ul></td></tr></table><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><a href="#/Home" class="btn btn-default">Back</a></div></div>'),e.put("angularJs/Apps/Applications/Templates/home.html",'<ol class="breadcrumb"><li><a href="/">Home</a></li><li class="active">Applications</li></ol><table class="table"><thead><tr></tr></thead><tr ng-repeat="application in vm.applications track by application.ID"><td>{{::application.Name}}</td><td><a href="#/View?id={{::application.ID}}" class="btn btn-default">View</a></td></tr></table>'),e.put("angularJs/Apps/Configuration/Templates/Create.html",'<ol class="breadcrumb"><li><a href="/">Home</a></li><li><a href="#">Roles</a></li><li class="active">Create</li></ol><role-form></role-form>'),e.put("angularJs/Apps/Configuration/Templates/Edit.html",'<ol class="breadcrumb"><li><a href="/">Home</a></li><li><a href="#">Roles</a></li><li class="active">Edit</li></ol><role-form></role-form>'),e.put("angularJs/Apps/Configuration/Templates/home.html",'<div class="page-header"><h3>Search Index Administration</h3></div><p class="text-info">There are currently {{vm.numberOfRecords}} documents indexed in the search engine.</p><h4>Reindex Documents</h4><p class="text-warning">Please only use the settings below if you know what you\'re doing.</p><p>Reindexing the search engine will clear all records and will recreate the entire index - this can be time consuming.</p><div class="row"><div class="col-lg-3"><div class="well"><h4>Reindex</h4><p style="font-size: smaller">Clicking the button below will reindex the selected search documents.</p><ul ng-repeat="item in vm.searchable" style="list-style-type: none; padding: 0; margin: 0"><li><div class="checkbox"><label><input type="checkbox" ng-model="item.Checked"><span ng-bind="item.Name"></span></label><i class="glyphicon glyphicon-ok" style="color: #5CB85C" ng-show="item.Success"></i></div></li></ul><button class="btn btn-primary" ng-click="vm.doReindex()" ng-disabled="disableButton">Reindex</button><div style="margin-top: 20px"><label><input type="checkbox" ng-model="advancedOptions"> Advanced Options</label></div><div ng-show="advancedOptions"><p class="text-warning">Only use these options if you are sure you know what you\'re doing!</p><button ng-click="vm.deleteSearchRecords()" class="btn btn-warning">Delete All Search Records</button></div></div><a href="/Admin/Settings/SearchSettings" class="btn btn-default">Back</a></div></div>'),e.put("angularJs/Apps/Institutions/Templates/Create.html",'<ol class="breadcrumb"><li><a href="/">Home</a></li><li><a href="#">Institutions</a></li><li class="active">Create</li></ol><notifications></notifications><institution-form></institution-form>'),e.put("angularJs/Apps/Institutions/Templates/Edit.html",'<ol class="breadcrumb"><li><a href="/">Home</a></li><li><a href="#">Institutions</a></li><li class="active">Edit</li></ol><notifications></notifications><institution-form></institution-form>'),e.put("angularJs/Apps/Institutions/Templates/home.html",'<ol class="breadcrumb"><li><a href="/">Home</a></li><li><a href="#" class="active">Institutions</a></li></ol><a href="#/Create" class="btn btn-default">Create Institution</a><table class="table"><thead><tr></tr></thead><tr ng-repeat="institution in vm.institutions track by institution.ID"><td>{{::institution.Name}}</td><td><a href="#/Edit?id={{::institution.ID}}" class="btn btn-default">Edit</a></td><td><button ng-click="vm.delete(institution)" class="btn btn-danger">Delete</button></td></tr></table>'),e.put("angularJs/Apps/Notifications/Templates/Create.html",'<ol class="breadcrumb"><li><a href="/">Home</a></li><li><a href="#/home?appID={{::vm.appID}}&eventID={{::vm.eventID}}">Notifications</a></li><li class="active">Create</li></ol><div class="page-header"><h2>{{vm.application.Name}} <small>{ {{vm.Event.FriendlyName}} }</small></h2><small ng-bind-html="vm.details | sanitize"></small></div><notification-form></notification-form>'),e.put("angularJs/Apps/Notifications/Templates/Edit.html",'<ol class="breadcrumb"><li><a href="/">Home</a></li><li><a href="#/Home?appID={{::vm.appID}}&eventID={{::vm.Notification.GeneratedBy.ID}}">Notifications</a></li><li class="active">Edit</li></ol><notification-form></notification-form>'),e.put("angularJs/Apps/Notifications/Templates/home.html",'<ol class="breadcrumb"><li><a href="/">Home</a></li><li class="active">Notifications</li></ol><notifications></notifications><div class="btn-group"><select class="form-control" ng-options="application as application.Name for application in filtered = (vm.applications | filter:application.Events.length > 0)" ng-model="vm.selectedApplication"><option value="">Select an application</option></select></div><div class="btn-group"><select class="form-control" ng-disabled="vm.selectedApplication == undefined" ng-options="event as event.FriendlyName for event in vm.selectedApplication.Events" ng-model="vm.selectedEvent" ng-change="vm.getNotifications(vm.selectedApplication.ID, vm.selectedEvent.ID)"><option value="">Select an event</option></select></div><div ng-show="vm.notifications"><div class="page-header"><h2>{{vm.selectedApplication.Name}} <small>{ {{vm.selectedEvent.FriendlyName}} }</small></h2><small ng-bind-html="vm.details | sanitize"></small></div><div class="panel panel-default"><div class="panel-heading clearfix">Notifications <a href="#/Create?appID={{::vm.appID}}&eventID={{::vm.eventID}}" class="btn btn-default pull-right">Create Notification</a></div><div class="panel-body"><table class="table table-striped table-hover table-condensed"><thead><tr></tr></thead><tr ng-repeat="notification in vm.notifications track by notification.ID"><td>{{::notification.Subject}}</td><td><a href="#/Edit?id={{::notification.ID}}&appID={{::vm.appID}}&eventID={{::vm.eventID}}" class="btn btn-default btn-sm">Edit</a></td><td><button ng-click="vm.delete(notification)" class="btn btn-danger btn-sm">Delete</button></td></tr></table></div></div></div>'),e.put("angularJs/Apps/Roles/Templates/Create.html","<role-form></role-form>"),e.put("angularJs/Apps/Roles/Templates/Edit.html","<role-form></role-form>"),e.put("angularJs/Apps/Roles/Templates/home.html",'<notifications></notifications><a href="#/Create" class="btn btn-default">Create Role</a><table class="table" show-errors-no-form><thead><tr><th><a ng-click="vm.reorder(\'name\')">name <span ng-class="vm.getGlyphClass(\'name\')" aria-hidden="true"></span></a></th><th></th><th></th><th></th></tr></thead><tr ng-repeat="role in vm.roles"><td>{{::role.Name}}</td><td><span class="label label-info">{{::role.NumberOfUses}}</span></td><td><a href="#/Edit?id={{::role.ID}}" class="btn btn-default">Edit</a></td><td><button ng-really-message="Are you sure ?" ng-really-click="vm.reallyDelete(role)" class="btn btn-danger">Delete</button></td></tr></table><uib-pagination total-items="vm.query.TotalNumberOfResults" ng-model="vm.query.StartAt" ng-change="vm.pageChanged()" items-per-page="vm.query.PageSize" class="pagination-sm" boundary-links="true"></uib-pagination>'),e.put("angularJs/Apps/Users/Templates/create.html",'<user-form backg="users.home"></user-form>'),e.put("angularJs/Apps/Users/Templates/edit.html",'<user-form backroute="users.home"></user-form>'),e.put("angularJs/Apps/Users/Templates/home.html",'<notifications></notifications><a ui-sref="users.create" class="btn btn-default">Create User</a><table class="table" ng-cloak><thead><tr><th><a ng-click="vm.reorder(\'username\')">username <span ng-class="vm.getGlyphClass(\'username\')" aria-hidden="true"></span></a></th><th><a ng-click="vm.reorder(\'forename\')">forename</a> <span ng-class="vm.getGlyphClass(\'forename\')" aria-hidden="true"></span></th><th><a ng-click="vm.reorder(\'surname\')">surname</a> <span ng-class="vm.getGlyphClass(\'surname\')" aria-hidden="true"></span></th><th><a ng-click="vm.reorder(\'email\')">email</a> <span ng-class="vm.getGlyphClass(\'email\')" aria-hidden="true"></span></th><th></th></tr></thead><tr ng-repeat="user in vm.users track by user.Username"><td>{{::user.Username}}</td><td>{{::user.Forename}}</td><td>{{::user.Surname}}</td><td>{{::user.Email}}</td><td><a ui-sref="users.edit({id:{{::user.ID}}})" class="btn btn-default">Edit</a></td></tr></table><uib-pagination total-items="vm.query.TotalNumberOfResults" ng-model="vm.query.StartAt" ng-change="vm.pageChanged()" items-per-page="vm.query.PageSize" class="pagination-sm" boundary-links="true"></uib-pagination>')}]),function(){var e=angular.module("helpers",["ui.bootstrap"]);e.directive("addressForm",function(){return{restrict:"E",templateUrl:"angularJs/Templates/_addressForm.html"}}),e.directive("notificationForm",function(){return{restrict:"E",templateUrl:"angularJs/Templates/_notificationForm.html"}}),e.directive("notifications",function(){return{restrict:"E",require:"^form",controller:"successMessageController",scope:!1,templateUrl:"angularJs/Templates/_notifications.html"}}),e.directive("institutionForm",function(){return{restrict:"E",require:"^form",controller:"successMessageController",scope:!1,templateUrl:"angularJs/Templates/_institutionForm.html"}}),e.directive("paging",function(){return{restrict:"E",scope:{queryItem:"="},templateUrl:"angularJs/Templates/_paging.html"}}),e.directive("ngReallyClick",["$uibModal",function(e){var t=function(e,t){e.ok=function(){t.close()},e.cancel=function(){t.dismiss("cancel")}};return{restrict:"A",scope:{ngReallyClick:"&"},link:function(n,o,r){o.bind("click",function(){var o=r.ngReallyMessage||"Are you sure ?",s='<div class="modal-body">'+o+"</div>";s+='<div class="modal-footer"><button class="btn btn-primary" ng-click="ok()">OK</button><button class="btn btn-warning" ng-click="cancel()">Cancel</button></div>';var a=e.open({template:s,controller:t});a.result.then(function(){n.ngReallyClick()},function(){})})}}}]),e.directive("userForm",function(){return{restrict:"E",controller:"successMessageController",templateUrl:"angularJs/Templates/_userForm.html",link:function(e,t,n){e.backg=n.backg}}}),e.directive("roleForm",function(){return{restrict:"E",require:"^form",controller:"successMessageController",scope:!1,templateUrl:"angularJs/Templates/_roleForm.html"}}),e.controller("successMessageController",function(e){e.notifications={},e.notifications.success={}})}(),function(){var e=angular.module("ui.bootstrap.showErrors",[]);e.config(function(e){e.interceptors.push("fieldValInterceptor")}),e.directive("showErrors",["$timeout","showErrorsConfig","$interpolate",function(e,t,n){var o,r=function(e){var n;return n=t.trigger,e&&null!=e.trigger&&(n=e.trigger),n},s=function(e){var n;return n=t.showSuccess,e&&null!=e.showSuccess&&(n=e.showSuccess),n},a=function(t,a,i,l){var c,u=!1,d=t.$eval(i.showErrors),m=s(d),p=r(d),f=a[0].querySelector(".form-control[name]"),h=angular.element(f),v=n(h.attr("name")||"")(t);if(!v)throw"show-errors element has no child input elements with a 'name' attribute and a 'form-control' class";return h.bind(p,function(){return u=!0,c(l[v].$invalid)}),t.$watch(function(){return l[v]&&l[v].$invalid},function(e){if(u)return c(e)}),t.$on("_ERROR_FIELDS_",function(n,r){e(function(){o=r.ErrorFields;var e,n=[];t.notifications={},t.notifications.success={valid:!1},null!=r.ErrorFields[v]&&l[v]&&(l[v].$setValidity(v,!1),l[v].$errorText=r.ErrorFields[v],c(l[v].$invalid));for(e in r.ErrorFields)l[e]||n.push(r.ErrorFields[e]);n.length>0&&(t.notifications={},t.notifications.errors={invalid:!0,descriptions:n}),t.$apply()},0,!1)}),t.$on("show-errors-check-validity",function(){return c(l[v].$invalid)}),t.$on("show-errors-reset",function(n,r){return e(function(){if(a.removeClass("has-error"),a.removeClass("has-success"),null!=o){var e;for(e in o)l[e]&&l[e].$setValidity(e,!0);l.$setPristine(),l.$setUntouched(),l.$setValidity(),o=null,t.$apply()}return u=!1},0,!1)}),c=function(e){if(a.toggleClass("has-error",e),m)return a.toggleClass("has-success",!e)}};return{restrict:"A",require:"^form",compile:function(e,t){if(t.showErrors.indexOf("skipFormGroupCheck")===-1&&!e.hasClass("form-group")&&!e.hasClass("input-group"))throw"show-errors element does not have the 'form-group' or 'input-group' class";return a}}}]),e.provider("showErrorsConfig",function(){var e,t;e=!1,t="blur",this.showSuccess=function(t){return e=t},this.trigger=function(e){return t=e},this.$get=function(){return{showSuccess:e,trigger:t}}}),e.factory("fieldValInterceptor",function(e,t){return{response:function(n){if("application/json; charset=utf-8"===n.headers()["content-type"]){var o=n.data;if(!o)return e.reject(n);if(o.ErrorFields&&o.ErrorFields.length>0){var r=[];for(item in o.ErrorFields)console.log(item),r[o.ErrorFields[item].Key]=o.ErrorFields[item].Value;t.$broadcast("_ERROR_FIELDS_",{ErrorFields:r})}}return n},responseError:function(t){return e.reject(t)}}})}(),angular.module("customFilters",[]).filter("inArray",function(e){return function(t,n,o){if(n)return e("filter")(t,function(e){return n.indexOf(e[o])!=-1})}}).filter("notInArray",function(e){return function(t,n,o){if(n)return e("filter")(t,function(e){for(var t=0;t<n.length;t++)if(n[t][o]==e[o])return!1;return!0})}}).filter("sanitize",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),angular.module("applicationServices",[]).factory("$applicationServices",function(e){var t=config.serviceRoot+"/Applications/";return{getAll:function(){return e.get(t+"GetAll").then(function(e){return e.data})},get:function(n){return e.get(t+"Get",{params:{Id:n}}).then(function(e){return e.data})}}}),angular.module("eventServices",[]).factory("$eventServices",function(e){var t=config.serviceRoot+"/Events/";return{get:function(n){return e.get(t+"Get",{params:{Id:n}}).then(function(e){return e.data})}}}),angular.module("institutionServices",[]).factory("$institutionServices",function(e){var t=config.serviceRoot+"/Institutions/";return{getAll:function(){return e.get(t+"GetAll").then(function(e){return e.data})},get:function(n){return e.get(t+"Get",{params:{Id:n}}).then(function(e){return e.data})},update:function(n){return e.put(t+"Update",n).then(function(e){return e.data})},create:function(n){return e.post(t+"Create",n).then(function(e){return e.data})},remove:function(n){return e["delete"](t+"Delete",{params:{ID:n.ID}}).then(function(e){return e.data})}}}),angular.module("notificationServices",[]).factory("$notificationServices",function(e){var t=config.serviceRoot+"/Notifications/";return{getByEventID:function(n){return e.get(t+"GetByEventID",{params:{Id:n}}).then(function(e){return e.data})},get:function(n){return e.get(t+"Get",{params:{Id:n}}).then(function(e){return e.data})},create:function(n){return e.post(t+"Create",n).then(function(e){return e.data})}}}),angular.module("roleServices",[]).factory("$roleServices",function(e){var t=config.serviceRoot+"/Roles/";return{getAll:function(){return e.get(t+"GetAll").then(function(e){return e.data})},get:function(n){return e.get(t+"Get",{params:{Id:n}}).then(function(e){return e.data})},getWithQuery:function(n){return e.post(t+"Get/Query",n).then(function(e){return e.data})},getQueryItem:function(){return e.get(t+"Query").then(function(e){return e.data})},update:function(n){return e.put(t+"Update",n).then(function(e){return e.data})},create:function(n){return e.post(t+"Create",n).then(function(e){return e.data})},remove:function(n){return e["delete"](t+"Delete",{params:{ID:n.ID}}).then(function(e){return e.data})}}}),angular.module("searchServices",[]).factory("$searchServices",function(e){var t=(config.serviceRoot+"/Search/",config.serviceRoot+"/Site/Search/");return{reindexSearchDocuments:function(n){return e.post(t+"ReindexSearchDocuments",{ItemsToReindex:n}).then(function(e){return e.data})},deleteAllSearchDocuments:function(){return e.post(t+"DeleteAll").then(function(e){return e.data})},getSearchable:function(){return e.get(t+"Availability").then(function(e){return e.data})},getSearchStatistics:function(){return e.get(t+"Statistics").then(function(e){return e.data})}}}),angular.module("userServices",[]).factory("$userServices",function(e){var t=config.serviceRoot+"/Users/";return{newUser:function(){return e.get(t+"Get/New").then(function(e){return e.data})},getAll:function(){return e.get(t+"GetAll").then(function(e){return e.data})},get:function(n){return e.get(t+"Get",{params:{Id:n}}).then(function(e){return e.data})},getWithQuery:function(n){return e.post(t+"Get/Query",n).then(function(e){return e.data})},getQueryItem:function(){return e.get(t+"Query").then(function(e){return e.data})},update:function(n){return e.put(t+"Update",n).then(function(e){return e.data})},create:function(n){return e.post(t+"Create",n).then(function(e){return e.data})}}});var accountsApp=angular.module("accountsApp",["ngRoute","accountServices","ui.bootstrap.showErrors","ui.bootstrap","helpers"]);accountsApp.config(function(e,t,n){n.debugInfoEnabled(!1);var o=config.angularRoot+"/Apps/Accounts/Templates/";t.enabled(!1),e.when("/Login",{controller:"LoginController as ctrl",controllerAs:"vm",templateUrl:o+"Login.html"}).otherwise({redirectTo:"/Login"})}),accountsApp.controller("LoginController",function(e){var t=this;e.getAll().then(function(e){t.applications=e.Results})});var institutionsApp=angular.module("institutionsApp",["ngRoute","institutionServices","ui.bootstrap.showErrors","ui.bootstrap","helpers"]);institutionsApp.config(function(e,t,n){n.debugInfoEnabled(!1);var o=config.angularRoot+"/Apps/Institutions/Templates/";t.enabled(!1),e.when("/Home",{controller:"HomeController as ctrl",controllerAs:"vm",templateUrl:o+"Home.html"}).when("/Edit",{controller:"EditController",
controllerAs:"vm",templateUrl:o+"Edit.html"}).when("/Create",{controller:"CreateController",controllerAs:"vm",templateUrl:o+"Create.html"}).otherwise({redirectTo:"/Home"})}),institutionsApp.controller("HomeController",function(e){var t=this;e.getAll().then(function(e){t.institutions=e.Results}),t["delete"]=function(n){e.remove(n).then(function(e){e.Success&&(console.log(t.institutions.indexOf(n)),t.institutions.splice(t.institutions.indexOf(n),1))})}}),institutionsApp.controller("EditController",function(e,t,n){var o=this;t.get(e.search().id).then(function(e){o.institutionConfig=e.Results}),o.Save=function(){t.update(o.institutionConfig).then(function(e){e.Success&&(n.notifications.success.valid=!0,n.notifications.success.descriptions=["sdsadasasdsa"],n.$broadcast("show-errors-reset"))})}}),institutionsApp.controller("CreateController",function(e,t,n){var o=this;o.institutionConfig={},o.institutionConfig.Institution={},o.Save=function(){t.create(o.institutionConfig).then(function(e){e.Success&&(o.institutionConfig=e.Results,n.notifications.success.valid=!0,n.notifications.success.descriptions=["sdsadasasdsa"],n.$broadcast("show-errors-reset"))})}});var applicationsApp=angular.module("applicationsApp",["ngRoute","applicationServices","ui.bootstrap.showErrors","ui.bootstrap","helpers"]);applicationsApp.config(function(e,t,n){n.debugInfoEnabled(!1);var o=config.angularRoot+"/Apps/Applications/Templates/";t.enabled(!1),e.when("/Home",{controller:"HomeController as ctrl",controllerAs:"vm",templateUrl:o+"Home.html"}).when("/View",{controller:"ViewController",controllerAs:"vm",templateUrl:o+"View.html"}).otherwise({redirectTo:"/Home"})}),applicationsApp.controller("HomeController",function(e){var t=this;e.getAll().then(function(e){t.applications=e.Results})}),applicationsApp.controller("ViewController",function(e,t){var n=this;t.get(e.search().id).then(function(e){n.application=e.Results})});var configurationApp=angular.module("configurationApp",["ngRoute","searchServices","helpers","ui.bootstrap","ui.bootstrap.showErrors"]);configurationApp.config(function(e,t,n){n.debugInfoEnabled(!1);var o=config.angularRoot+"/Apps/Configuration/Templates/";t.enabled(!1),e.when("/Home",{controller:"HomeController",controllerAs:"vm",templateUrl:o+"Home.html"}).otherwise({redirectTo:"/Home"})}),configurationApp.controller("HomeController",function(e){var t=this,n=new Array;e.getSearchable().then(function(e){angular.forEach(e.Results,function(e,t){n.push({Name:e,Checked:!1})}),t.searchable=n,console.log(t.searchable)}),t.doReindex=function(){var n=!1;angular.forEach(t.searchable,function(e,t){e.Success=!1});var o=[];angular.forEach(t.searchable,function(e,t){!n&&e.Checked&&(n=!0)}),angular.forEach(t.searchable,function(e,t){console.log(e),e.Checked&&o.push(e.Name)}),o.length>0&&e.reindexSearchDocuments(o).then(function(e){value.Success=e.Success,t.disableButton=!1})}});var notificationsApp=angular.module("notificationsApp",["ngRoute","notificationServices","applicationServices","eventServices","ui.bootstrap","ui.bootstrap.showErrors","helpers","customFilters"]);notificationsApp.config(function(e,t,n){n.debugInfoEnabled(!1);var o=config.angularRoot+"/Apps/Notifications/Templates/";t.enabled(!1),e.when("/Home",{controller:"HomeController",controllerAs:"vm",templateUrl:o+"Home.html"}).when("/Notifications",{controller:"NotificationsController",controllerAs:"vm",templateUrl:o+"Notifications.html"}).when("/Create",{controller:"CreateController",controllerAs:"vm",templateUrl:o+"Create.html"}).when("/Edit",{controller:"EditController",controllerAs:"vm",templateUrl:o+"Edit.html"}).otherwise({redirectTo:"/Home"})}),notificationsApp.controller("HomeController",function(e,t,n,o){var r=this;r.appID=o.search().eventID,r.eventID=o.search().appID,t.getAll().then(function(e){r.applications=e.Results}),r.getNotifications=function(t,o){r.eventID=o,r.appID=t,n.get(o).then(function(e){if(r.Event=e.Results,r.details={},null!=r.Event.Details){var t=new commonmark.Parser,n=new commonmark.HtmlRenderer,o=t.parse(r.Event.Details);r.details=n.render(o)}}),e.getByEventID(o).then(function(e){r.notifications=e.Results})},r.Create=function(){$scope.$broadcast("show-errors-reset")}}),notificationsApp.controller("NotificationsController",function(e,t,n,o,r){var s=this;s.appID=o.search().eventID,s.eventID=o.search().appID,t.get(o.search().eventID).then(function(e){s.Event=e.Results;var t=new commonmark.Parser,n=new commonmark.HtmlRenderer,o=t.parse(s.Event.Details);s.details=n.render(o)}),e.getByEventID(o.search().eventID).then(function(e){s.notifications=e.Results})}),notificationsApp.controller("CreateController",function(e,t,n,o,r){var s=this;s.Notification={},s.appID=o.search().appID,s.eventID=o.search().eventID,s.overrideFrom="nope",t.get(s.appID).then(function(e){s.application=e.Results}),n.get(o.search().eventID).then(function(e){s.Event=e.Results,s.Notification.EventID=s.Event.ID,s.Notification.Type=0,s.Notification.Message="";var t=new commonmark.Parser,n=new commonmark.HtmlRenderer,o=t.parse(s.Event.Details);s.details=n.render(o),s.fromRBL=s.Event.HasTarget?"DefaultTarget":"DefaultRecipient",console.log(s.fromRBL)}),s.AppendTag=function(e){s.Notification.Message+=e.Name},s.Create=function(){e.create(s.Notification).then(function(e){}),r.$broadcast("show-errors-reset")}}),notificationsApp.controller("EditController",function(e,t,n,o){var r=this;r.appID=n.search().appID,e.get(n.search().id).then(function(e){r.Notification=e.Results,null!=r.Notification.From?r.fromRBL="Override":r.fromRBL=r.Notification.GeneratedBy.HasTarget?"DefaultTarget":"DefaultRecipient"});var s=new commonmark.Parser,a=new commonmark.HtmlRenderer;r.Create=function(){o.$broadcast("show-errors-reset");var e=s.parse(r.Notification.Message);console.log(a.render(e))}});var rolesApp=angular.module("rolesApp",["roleServices","helpers","ui.bootstrap","ui.bootstrap.showErrors"]);rolesApp.config(function(e,t){t.debugInfoEnabled(!1),e.enabled(!1)}),rolesApp.controller("RolesHomeController",function(e){var t=this;e.getQueryItem(t.query).then(function(n){t.query=n.Results,e.getWithQuery(t.query).then(function(e){t.roles=e.Results})["catch"](function(e){console.log(e)})})["catch"](function(e){console.log(e)}),t.reallyDelete=function(n){e.remove(n).then(function(n){n.Success&&e.getWithQuery(t.query).then(function(e){t.roles=e.Results})["catch"](function(e){console.log(e)})})},t.pageChanged=function(){e.getWithQuery(t.query).then(function(e){t.roles=e.Results})["catch"](function(e){console.log(e)})},t.reorder=function(n){n===t.query.OrderBy?"Asc"===t.query.Direction?t.query.Direction="Desc":t.query.Direction="Asc":(t.query.Direction="Asc",t.query.OrderBy=n),e.getWithQuery(t.query).then(function(e){t.roles=e.Results})["catch"](function(e){console.log(e)})},t.getGlyphClass=function(e){return void 0===t.query||e!==t.query.OrderBy?"glyphicon glyphicon-triangle-bottom":e===t.query.OrderBy&&"Desc"===t.query.Direction?"glyphicon glyphicon-triangle-top":"glyphicon glyphicon-triangle-bottom"}}),rolesApp.controller("RolesEditController",function(e,t,n){var o=this;t.get(e.search().id).then(function(e){o.role=e.Results}),o.Save=function(){t.update(o.role).then(function(e){e.Success&&(n.notifications.success.valid=!0,n.notifications.success.descriptions=["The role was successfully created."],n.$broadcast("show-errors-reset"))})}}),rolesApp.controller("RolesCreateController",function(e,t,n){var o=this;o.role={},o.Save=function(){t.create(o.role).then(function(e){e.Success&&(o.role=e.Results,n.$broadcast("show-errors-reset"))})}});var singleApp=angular.module("singleApp",["ncy-angular-breadcrumb","templatescache","ui.router","rolesApp","usersApp"]).config(function(e){e.setOptions({prefixStateName:"users"})}).config(function(e,t){t.otherwise("users"),e.state("users",{"abstract":!0,template:"<div ui-view></div>"}).state("users.home",{url:"/users",controller:"UsersHomeController",controllerAs:"vm",templateUrl:"angularJs/Apps/Users/Templates/home.html",ncyBreadcrumb:{label:"Users Home"}}).state("users.edit",{url:"/edit/:id",controller:"UsersEditController",controllerAs:"vm",templateUrl:"angularJs/Apps/Users/Templates/edit.html",ncyBreadcrumb:{label:"Edit User",parent:"users.home"}}).state("users.create",{url:"/create",controller:"UsersCreateController",controllerAs:"vm",templateUrl:"angularJs/Apps/Users/Templates/create.html",ncyBreadcrumb:{label:"Create User",parent:"users.home"}}).state("roles",{"abstract":!0,template:"<div ui-view></div>"}).state("roles.home",{url:"/roles",controller:"RolesHomeController",controllerAs:"vm",templateUrl:"angularJs/Apps/Roles/Templates/home.html",ncyBreadcrumb:{label:"Roles Home"}}).state("roles.edit",{url:"/edit:id",controller:"RolesEditController",controllerAs:"vm",templateUrl:"angularJs/Apps/Roles/Templates/edit.html",ncyBreadcrumb:{label:"Edit Role",parent:"roles.home"}}).state("roles.create",{url:"/create",controller:"RolesCreateController",controllerAs:"vm",templateUrl:"angularJs/Apps/Roles/Templates/create.html",ncyBreadcrumb:{label:"Create Role",parent:"roles.home"}})}),usersApp=angular.module("usersApp",["userServices","roleServices","institutionServices","ui.bootstrap","ui.bootstrap.showErrors","helpers","customFilters","checklist-model"]);usersApp.config(function(e,t){t.debugInfoEnabled(!1),e.enabled(!1)}),usersApp.controller("UsersHomeController",function(e){var t=this;e.getQueryItem(t.query).then(function(n){t.query=n.Results,e.getWithQuery(t.query).then(function(e){t.users=e.Results})["catch"](function(e){console.log(e)})})["catch"](function(e){console.log(e)}),t.pageChanged=function(){e.getWithQuery(t.query).then(function(e){t.users=e.Results})["catch"](function(e){console.log(e)})},t.reorder=function(n){n===t.query.OrderBy?"Asc"===t.query.Direction?t.query.Direction="Desc":t.query.Direction="Asc":(t.query.Direction="Asc",t.query.OrderBy=n),e.getWithQuery(t.query).then(function(e){t.users=e.Results})["catch"](function(e){console.log(e)})},t.getGlyphClass=function(e){return void 0===t.query||e!==t.query.OrderBy?"glyphicon glyphicon-triangle-bottom":e===t.query.OrderBy&&"Desc"===t.query.Direction?"glyphicon glyphicon-triangle-top":"glyphicon glyphicon-triangle-bottom"}}),usersApp.controller("UsersEditController",function(e,t,n,o,r){var s=this;e.get(o.id).then(function(e){s.user=e.Results}),t.getAll().then(function(e){s.roles=e.Results}),n.getAll().then(function(e){s.institutions=e.Results,null!=s.institutions&&s.institutions.length>0&&null!=s.user&&null!=s.user.Institutions&&s.user.Institutions.length>0&&angular.forEach(s.institutions,function(e){angular.forEach(s.user.Institutions,function(t){e.ID==t.ID&&(e.Checked=!0)})})}),s.addToInstitution=function(e){console.log(e),s.user.Institutions.push(e),console.log(s.user.Institutions)},s.removeInstitution=function(e){s.user.Institutions.splice(s.user.Institutions.indexOf(e),1)},s.Save=function(){r.$broadcast("show-errors-reset"),e.update(s.user).then(function(e){e.Success&&(r.notifications.success.valid=!0,r.notifications.success.descriptions=["The user '"+s.user.Username+"' was successfully updated."])})}}),usersApp.controller("UsersCreateController",function(e,t,n,o){var r=this;e.newUser().then(function(e){r.user=e.Results}),t.getAll().then(function(e){r.roles=e.Results}),n.getAll().then(function(e){r.institutions=e.Results}),r.addToInstitution=function(e){r.user.Institutions.push(e)},r.removeInstitution=function(e){r.user.Institutions.splice(r.user.Institutions.indexOf(e),1)},r.Save=function(){o.$broadcast("show-errors-reset"),e.create(r.user).then(function(e){e.Success&&(o.notifications.success.valid=!0,o.notifications.success.descriptions=["The user '"+r.user.Username+"' was successfully created."])})}});